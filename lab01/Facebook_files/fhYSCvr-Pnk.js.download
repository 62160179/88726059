if (self.CavalryLogger) { CavalryLogger.start_js(["i8bs+"]); }

__d("CometMarketplaceInboxLabelChatDialogQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"3372974126058277",metadata:{},name:"CometMarketplaceInboxLabelChatDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometMarketplaceInboxLabelChatDialog.entrypoint",["CometMarketplaceInboxLabelChatDialogQuery$Parameters","JSResource"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){return{queries:{cometMarketplaceInboxLabelChatDialogQueryReference:{parameters:b("CometMarketplaceInboxLabelChatDialogQuery$Parameters"),variables:{id:a.thread_id}}}}},root:b("JSResource")("CometMarketplaceInboxLabelChatDialog.react").__setRef("CometMarketplaceInboxLabelChatDialog.entrypoint")};e.exports=a}),null);
__d("MWLSThreadLastReadWatermarkTimestamp.bs",["bs_int64","React","SkytaleDB","bs_caml_int64","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("bs_int64").to_string(d);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0}),function(a){return a.j})},[c,a]));if(a!==void 0)return b("bs_caml_int64").to_float(a)}f.useHook=a}),null);
__d("MWLSAddParticipantsToGroup.bs",["LS.bs","bs_curry","LSVec.bs","React","MWLSActor.bs","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSMailboxAddParticipantToGroupThreadStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);a=b("MWLSActor.bs").useActor(void 0);var d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return g.useCallback(function(a){var e=b("LSTransaction.bs").run(c,function(c){return b("LSMailboxAddParticipantToGroupThreadStoredProcedure")(d,b("LSVec.bs").make(a),b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");b("promiseDone")(e,void 0,void 0)},[c,a,d])}f.useHook=a}),null);
__d("MWChatTab.bs",["bs_curry","React","JSResource","stylex","bs_caml_option","MWChatPageHeader.bs","MWChatTabContent.bs","MWChatUserHeader.bs","MWChatGroupHeader.bs","BootloaderResource","MWChatLoadingHeader.bs","MWChatTabFocusHandler.bs","MWUISendTypingIndicator.bs","MWChatConnectionStatusCard.bs","MWChatFocusComposerContext.bs","MWChatUserMessageRequestHeader.bs","MWChatGroupMessageRequestHeader.bs"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=b("JSResource")("MWChatAddParticipantsHeader.bs").__setRef("MWChatTab.bs");function j(a,c,d,e,f){f={dispatch:c,isTabFocused:d,participants:e};a!==void 0&&(f.backgroundColor=b("bs_caml_option").valFromOption(a));return f}function k(a){return h.createElement(b("BootloaderResource").read(i).make,a)}c={reasonResource:i,makeProps:j,make:k};var l={root:{height:"datstx6m",display:"j83agx80",flexDirection:"cbu4d94t",overflowX:"ni8dbmo4",overflowY:"stjgntxs",isolation:"fbhpx0h9"},header:{flexShrink:"pfnyh3mw",position:"l9j0dhe7",zIndex:"tkr6xdv7"}};function a(a){var c=a.id,d=a.items,e=a.header,f=a.otherUserFbid,i=a.rtcButtonDisplayState,m=a.showSettings,n=a.isActiveNow,o=a.contextBannerData,p=a.welcomePageData,q=a.unreadCount,r=a.isBlocked,s=a.isMuted,t=a.isViewerInGroup,u=a.isTabFocused,v=a.isScrolledToBottomRef,w=a.initialComposerViewState,x=a.scrollerRef,y=a.sheet,z=a.icebreakerUI,A=a.managePageMessagesLink,B=a.shouldShowMenu,C=a.composerType,D=a.dispatch,E=a.closeTab,F=a.minimizeTab,G=a.clickHeader,H=a.endFirstChatTabOpenLoggerRef,I=a.hasContent,J=a.participants,K=a.pageVerificationBadge,L=a.reportingToken,M=a.repliedToMessage,N=a.isEmptyThread,O=a.openPageURL,P=a.showConnectionStatus,Q=a.ongoingCallType,R=a.buildSharedMediaViewerURL,S=a.messageRequestInfoText,T=a.closeReplyPreview;a=a.onSendMessage;y=y!==void 0?b("bs_caml_option").valFromOption(y):null;z=z!==void 0?b("bs_caml_option").valFromOption(z):null;P=P!==void 0?P:!0;q=!u&&q>0;var U=b("bs_curry")._1(b("MWUISendTypingIndicator.bs").useHook,void 0),V;if(typeof e==="number")V=e===0?h.jsx(k,j(void 0,D,u,J,void 0)):h.jsx(b("MWChatLoadingHeader.bs").make,{closeTab:E,minimizeTab:F,clickHeader:G,isTabFocused:u});else switch(e.TAG|0){case 0:V=h.jsx(b("MWChatUserHeader.bs").make,{id:c,header:e._0,rtcButtonDisplayState:i,showSettings:m,isActiveNow:n,highlightHeader:q,isBlocked:r,isMuted:s,isTabFocused:u,dispatch:D,closeTab:E,minimizeTab:F,clickHeader:G,pageVerificationBadge:K,reportingToken:L,isEmptyThread:N});break;case 1:V=h.jsx(b("MWChatUserMessageRequestHeader.bs").make,{id:c,header:e._0,showSettings:m,isActiveNow:n,highlightHeader:q,isBlocked:r,isMuted:s,isTabFocused:u,dispatch:D,closeTab:E,minimizeTab:F,clickHeader:G,pageVerificationBadge:K,reportingToken:L,isEmptyThread:N});break;case 2:V=h.jsx(b("MWChatPageHeader.bs").make,{id:c,header:e._0,rtcButtonDisplayState:i,showSettings:m,isActiveNow:n,highlightHeader:q,isBlocked:r,isMuted:s,isTabFocused:u,dispatch:D,closeTab:E,minimizeTab:F,clickHeader:G,participants:J,pageVerificationBadge:K,reportingToken:L,isEmptyThread:N,openPageURL:O});break;case 3:V=h.jsx(b("MWChatGroupHeader.bs").make,{id:c,header:e._0,rtcButtonDisplayState:i,showSettings:m,isActiveNow:n,highlightHeader:q,isBlocked:r,isMuted:s,isViewerInGroup:t,isTabFocused:u,dispatch:D,closeTab:E,minimizeTab:F,clickHeader:G,reportingToken:L,isEmptyThread:N,ongoingCallType:Q});break;case 4:V=h.jsx(b("MWChatGroupMessageRequestHeader.bs").make,{id:c,header:e._0,showSettings:m,isActiveNow:n,highlightHeader:q,isBlocked:r,isMuted:s,isViewerInGroup:t,isTabFocused:u,dispatch:D,closeTab:E,minimizeTab:F,clickHeader:G,reportingToken:L,isEmptyThread:N});break}J={id:c,items:d,otherUserFbid:f,contextBannerData:o,welcomePageData:p,isTabFocused:u,isScrolledToBottomRef:v,scrollerRef:x,shouldShowMenu:B,composerType:C,dispatch:function(a){return D(a)},closeTab:E,endFirstChatTabOpenLoggerRef:H,icebreakerUI:z,managePageMessagesLink:A,hasContent:I,repliedToMessage:M,buildSharedMediaViewerURL:R,sendTypingIndicator:U,closeReplyPreview:T,onSendMessage:a};w!==void 0&&(J.initialComposerViewState=b("bs_caml_option").valFromOption(w));S!==void 0&&(J.messageRequestInfoText=b("bs_caml_option").valFromOption(S));return h.jsx(b("MWChatFocusComposerContext.bs").provider,{children:h.jsx(b("MWChatTabFocusHandler.bs").make,{onEscape:function(a){return b("bs_curry")._1(E,void 0)},onFocus:function(a){return D("MarkTabFocused")},onBlur:function(a){if(u)return D("MarkTabBlur")},children:h.jsxs("div",{children:[h.jsx("div",{children:V,className:(g||(g=b("stylex")))(l.header)}),P?h.jsx(b("MWChatConnectionStatusCard.bs").make,{}):null,y,h.jsx(b("MWChatTabContent.bs").make,J)],className:g(l.root)})})})}d=a;f.LazyMWChatAddParticipantsHeader=c;f.styles=l;f.make=d}),null);
__d("MWChatTabContainer.bs",["fbt","ODS","bs_curry","React","gkx","bs_js_dict","MWTheme.bs","qex","bs_caml_obj","MWUITheme.bs","SkytaleDB","bs_caml_array","JSResource","MercuryIDs","stylex","bs_belt_Option","bs_caml_format","bs_caml_option","CurrentUser","MWThreadKey.bs","requireCond","UserActivity","MWChatBlurTab.bs","MWChatOpenTab.bs","SkytaleDBHook.bs","MWChatCloseTab.bs","MWChatFocusTab.bs","MWChatThreadId.bs","MWUILeaveGroup.bs","MWUIThreadName.bs","SkytaleDBQuery.bs","CometLink.react","MWUIBlockStatus.bs","MWUIDeleteThread.bs","bs_js_null_undefined","MWChatCollapseTab.bs","MessengerWebEvent","BootloaderResource","MWUIChatThreadHook.bs","MWUIInThreadBanner.bs","MWUIStartPhoneCall.bs","MWChatHasTabContent.bs","MWThread_DEPRECATED.bs","MWUILoadThreadTitle.bs","MWUISendTextMessage.bs","MWUIThreadHasThread.bs","MWUILoadParticipants.bs","MWUIMarkThreadAsRead.bs","MWUIRTCDisplayStatus.bs","MWUIRepliedToMessage.bs","MWUIWebUrlCtaHandler.bs","recoverableViolation","MWUIChatContextBanner.bs","MWUIFetchMessagesPage.bs","MWUILoadThreadPicture.bs","MWUISendCometPostback.bs","MWUIThreadProfileLink.bs","ZenonUserActionLogger","MWUIGetServerMessageID.bs","MWUILoadThreadMessages.bs","MWUIThreadHasLeftGroup.bs","MessengerWebEntryPoint","unrecoverableViolation","MWUIContactCapabilities.bs","MWChatTabContainerShared.bs","MWUIThreadReportingToken.bs","MWUIThreadHasMoreMessages.bs","MWChatPollXMAActionHandler.bs","MWUIAddParticipantsToGroup.bs","MWUIPresenceIsThreadActive.bs","MWUIThreadIsMessageRequest.bs","MWUIThreadMuteExpireTimeMs.bs","RTWebLoggingSurfaceConvert.bs","useCometConfirmationDialog","MWChatBlockMessagesMutation","MWChatConfirmTabCloseDialog.bs","MWChatTabGroupWarningPolicy.bs","CometLazyDialogTrigger.react","MWChatComposerViewStateStore.bs","MWUIThreadUnreadMessageCount.bs","RTWebLoggingComponentConvert.bs","MWChatBusinessWelcomePageHook.bs","MWUIUpdateParticipantNickname.bs","MessengerWebStgTypedLoggerLite.bs","SkytaleDBQuerySubscriptionHook.bs","MWChatLoadMoreItemsIncrementally.bs","MWChatXmaThirdPartyActionHandler.bs","CometTransientDialogProvider.react","CometProgressRingIndeterminate.react","MWChatCalculateIsMutedFromExpireTime.bs","MWChatComposerMessageRequestInfoText.bs","MWLSThreadLastReadWatermarkTimestamp.bs","MWUILoadIsDisabledComposerThreadLevel.bs","MWChatEphemeralMediaTemporarySeenState.bs","XCometMessengerMediaControllerRouteBuilder","XCometMessengerPhotoControllerRouteBuilder","cr:1780084","cr:1617847"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j=b("JSResource")("MWChatBusinessIcebreaker.bs").__setRef("MWChatTabContainer.bs");function aa(a,c,d,e,f,g,h,i){i={icebreakers:a,icebreakerCTAs:c,onSend:d,onSendIcebreakerCTA:e,pageID:f,threadTitle:g};h!==void 0&&(i.showWarning=b("bs_caml_option").valFromOption(h));return i}function ba(a){return i.createElement(b("BootloaderResource").read(j).make,a)}function a(a){var c=a.isTabFocused,d=a.hasContent,e=a.isMultitab,f=a.useSidebarChatStyles,j=a.searchResultMessages;a=a.isMainRegion;e=e!==void 0?e:!1;j!==void 0&&b("bs_caml_option").valFromOption(j);j=a!==void 0?a:!1;a=i.useRef(!1);var k=b("bs_curry")._1(b("MWUIMarkThreadAsRead.bs").useHook,void 0),l=b("bs_curry")._1(b("MWUIThreadReportingToken.bs").useHook,void 0),m=b("bs_curry")._1(b("MWUIThreadHasThread.bs").useHook,void 0),n=b("bs_curry")._1(b("MWUIThreadHasLeftGroup.bs").useHook,void 0),o=b("bs_curry")._1(b("MWUIThreadUnreadMessageCount.bs").useHook,void 0),ca=b("MWLSThreadLastReadWatermarkTimestamp.bs").useHook(void 0),p=b("bs_curry")._1(b("MWUIThreadMuteExpireTimeMs.bs").useHook,void 0);p=b("MWChatCalculateIsMutedFromExpireTime.bs").useHook(p);var q=i.useState(function(){return o}),da=q[1],r=i.useState(function(){return ca}),ea=r[1],s=b("bs_curry")._1(b("MWUIThreadName.bs").useHook,void 0),fa=b("bs_curry")._1(b("MWUIStartPhoneCall.bs").useMakeRTCCall,void 0),ga=fa[0],ha=b("bs_curry")._1(b("MWUIAddParticipantsToGroup.bs").useHook,void 0),t=i.useState(function(){return!1}),ia=t[1];i.useEffect(function(){c&&o>0&&b("UserActivity").isOnTab()&&b("UserActivity").isActive()&&b("bs_curry")._1(k,void 0)},[c,o,k]);var u=b("MWThread_DEPRECATED.bs").useIdExn(void 0),v;if(typeof u==="string")v=void 0;else{var w=u.NAME;v=w==="User"||w==="Page"?b("bs_caml_option").some(u.VAL):void 0}w=b("MWChatComposerViewStateStore.bs").getScrollPos(u);var x=w!==void 0?w:0,y=i.useRef(x),z=i.useRef(null);i.useEffect(function(){if(b("gkx")("1329969")){b("MWChatComposerViewStateStore.bs").setScrollPos(u,x);return function(c){c=y.current;var a=b("MWChatComposerViewStateStore.bs").getScrollPos(u);if(a!==void 0)return b("MWChatComposerViewStateStore.bs").setScrollPos(u,c)}}},[]);b("MWChatComposerViewStateStore.bs").useClearComposerViewStateOnMount(u);w=b("MWChatLoadMoreItemsIncrementally.bs").useLoadMore(j,x,b("bs_curry")._2(b("MWUILoadThreadMessages.bs").useMessageItems,b("gkx")("1675204")?r[0]:void 0,b("gkx")("1675204")?q[0]:0),b("bs_curry")._1(b("MWUIFetchMessagesPage.bs").useFetchMessagesPage,void 0),b("bs_curry")._1(b("MWUIThreadHasMoreMessages.bs").useThreadHasMoreMessages,void 0));r=w[2];var ja=w[1];q=[{NAME:"Messages",VAL:w[0]}];b("bs_curry")._1(b("MWUIChatThreadHook.bs").useThread,u);w=b("bs_curry")._1(b("MWUILoadParticipants.bs").useMercuryParticipants,u);var A=w[0],B=b("bs_curry")._1(b("MWUIPresenceIsThreadActive.bs").useHook,void 0),C=b("bs_curry")._1(b("MWUIRepliedToMessage.bs").useCurrentlyRepliedToMessage,void 0),ka=C[2],la=C[1];C=C[0];var ma=b("bs_curry")._1(b("MWUITheme.bs").useTheme,void 0),na=function(a,c){c=a!==void 0?a:!1;a=y.current;if(typeof a==="number")if(c)return b("bs_curry")._1(ja,void 0);else return;else if(a.TAG)return;else return b("bs_curry")._1(ja,void 0)},D=b("bs_curry")._1(b("MWUIBlockStatus.bs").useIsThreadBlocked,void 0),oa=typeof u==="string"||u.NAME!=="Group"?!1:b("bs_js_dict").entries(A).some(function(a){return b("bs_caml_obj").caml_equal(a[1].id,b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID()))}),E=b("bs_curry")._1(b("MWUILoadThreadPicture.bs").useHook,void 0),F=b("bs_curry")._1(b("MWUILoadThreadTitle.bs").useHook,void 0),pa=F[1];F=F[0];var G=b("bs_curry")._1(b("MWUIThreadIsMessageRequest.bs").useHook,void 0),H=b("bs_curry")._1(b("MWUIThreadProfileLink.bs").useHook,void 0),I=u.NAME;if(I==="Group")if(t[0])t=0;else if(F!==void 0&&E.length>0){var J=b("bs_belt_Option").getWithDefault(s,"");J={title:F,rawTitle:J,profileImages:E};t=G?{TAG:4,_0:J}:{TAG:3,_0:J}}else t=1;else if(I==="Page")t=s!==void 0&&F!==void 0&&E.length>0?{TAG:2,_0:{title:F,rawTitle:s,actorID:u.VAL,href:H,profileImage:b("bs_caml_array").get(E,0)}}:1;else if(F!==void 0&&E.length>0){J=b("bs_belt_Option").getWithDefault(s,"");I=u.VAL;s=b("bs_caml_array").get(E,0);J={title:F,rawTitle:J,actorID:I,href:H,profileImage:s};t=G?{TAG:1,_0:J}:{TAG:0,_0:J}}else t=1;if(m){if(q.length!==1)I=!1;else{H=q[0];I=H.VAL.length!==0?!1:!r}if(typeof u==="string")s=[!0,!r,I];else{J=u.NAME;s=J==="Page"||J==="Group"?[!0,!r,I]:[!0,!r,I]}}else s=[!1,!1,!0];m=s[2];H=b("bs_curry")._1(b("MWUIRTCDisplayStatus.bs").useHook,void 0);var qa=b("SkytaleDBHook.bs").useHook(void 0),ra=b("MWThreadKey.bs").useIdMemoizedExn(void 0);J=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(i.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(qa,"threads").asc,{hd:ra,tl:0})},[qa,ra]));r=J!==void 0?J.J:!1;I=b("bs_curry")._4(b("MWUIChatContextBanner.bs").useContextBanner,u,E,s[1],F);E=b("MWChatBusinessWelcomePageHook.bs").useMessengerBusinessWelcomePage(u,m);var K=b("bs_curry")._1(b("MWUILoadIsDisabledComposerThreadLevel.bs").useHook,u);J=J!==void 0?J.K:!1;var L=b("gkx")("1277703"),M;if(D!==void 0){var N=0;if(typeof u==="string")N=1;else{var O=u.NAME;if(O==="Group")n?M=2:N=1;else if(O==="Page"){n=K!==void 0?K:J;K=0;L&&D?M={TAG:1,otherUserFbid:u.VAL,reportingToken:l}:K=2;if(K===2)if(E!==void 0){J=b("bs_caml_option").valFromOption(E).null_state_cta;M=J!==void 0?{TAG:2,nullStateCTA:b("bs_caml_option").valFromOption(J),pageName:F}:n===!0?1:0}else M=n?1:0}else O==="User"&&D?M={TAG:0,otherUserFbid:u.VAL,reportingToken:l}:N=1}N===1&&(M=G&&b("gkx")("1217157")?3:typeof u==="string"||!(u.NAME==="User"&&b("gkx")("1775407"))?0:5)}else M=6;L=b("MWChatHasTabContent.bs").useHook(void 0);var P=b("MWChatCloseTab.bs").useHook(b("MessengerWebEntryPoint").UNKNOWN),Q=b("MWChatCollapseTab.bs").useHook(b("MessengerWebEntryPoint").UNKNOWN),sa=b("MWChatOpenTab.bs").useHook_DEPRECATED(b("MessengerWebEntryPoint").UNKNOWN),ta=b("MWChatFocusTab.bs").useHook(b("MessengerWebEntryPoint").UNKNOWN),ua=b("MWChatBlurTab.bs").useHook(b("MessengerWebEntryPoint").UNKNOWN);K=b("useCometConfirmationDialog")();var va=K[0],wa=b("bs_curry")._1(b("MWUILeaveGroup.bs").useHook,void 0),xa=function(a){typeof u==="string"||u.NAME!=="Group"?b("recoverableViolation")("Trying to leave non-group thread","messenger_comet"):b("bs_curry")._2(wa,u.VAL,a);return b("bs_curry")._1(P,u)};b("MWChatTabGroupWarningPolicy.bs").useGroupEntranceWarningEffect(u,xa,function(a){return b("bs_curry")._1(P,u)},function(a){return b("bs_curry")._1(sa,u)});var ya=function(a){a=z.current;if(!(a==null))return a.scrollToBottom()},za=b("bs_curry")._1(b("MWUIUpdateParticipantNickname.bs").useHook,void 0),Aa=b("MWChatXmaThirdPartyActionHandler.bs").useHandler(void 0),Ba=b("MWChatPollXMAActionHandler.bs").useHandler(void 0),Ca=b("bs_curry")._2(b("MWUISendTextMessage.bs").useSendTextMessage,void 0,void 0),Da=b("bs_curry")._1(b("MWUIDeleteThread.bs").useDeleteThread,void 0),Ea=b("bs_curry")._1(b("MWUIWebUrlCtaHandler.bs").useShowWebViewDialog,void 0),Fa=b("bs_curry")._1(b("MWUISendCometPostback.bs").useSendCometPostback,void 0),Ga=b("bs_curry")._1(L,u);b("MWChatEphemeralMediaTemporarySeenState.bs").useEndSessionOnDismount(b("MWChatThreadId.bs").getFBID(u));var Ha=u.VAL,Ia=function(a){if(o>0&&y.current===0)return b("bs_curry")._1(k,void 0)},R=function(a){b("bs_curry")._1(k,void 0);ya(void 0);b("bs_curry")._1(da,function(a){return 0});return b("bs_curry")._1(ea,function(a){})};J=i.useCallback(function(a){if(Ga)return b("bs_curry")._3(va,b("MWChatConfirmTabCloseDialog.bs").content,function(a){return b("bs_curry")._1(P,u)},function(a){});else return b("bs_curry")._1(P,u)},[u,Ga,va,P]);n=i.useCallback(function(a){b("ODS").bumpEntityKey(3185,"mwchat_header","minimize");a=typeof u==="string"||u.NAME!=="Group"?null:u.VAL;b("MessengerWebStgTypedLoggerLite.bs").log({event_name:b("MessengerWebEvent").MINIMIZE_CHAT_TAB,other_user_fbid:b("bs_js_null_undefined").fromOption(v),thread_fbid:a});return b("bs_curry")._1(Q,u)},[u,Q]);O=i.useCallback(function(a){return b("bs_curry")._1(Q,u)},[Q,u]);N=function(d){if(typeof d==="string"){if(d==="ScrollToBottom")return Ia(void 0);if(d==="OpenTabFromPreview")return;if(d==="ClickAudio"){if(typeof u==="string")return b("unrecoverableViolation")("Attempted to call unsupported thread type","messenger_comet");var c=u.NAME;if(c==="User"||c==="Page"||c==="Group"){b("ZenonUserActionLogger").logClick({component:b("bs_curry")._1(b("RTWebLoggingComponentConvert.bs").converter.toJS,0),surface:b("bs_curry")._1(b("RTWebLoggingSurfaceConvert.bs").converter.toJS,3)});return b("bs_curry")._3(ga,!1,u.VAL,"comet_chattab_audio_button")}else return b("unrecoverableViolation")("Attempted to call unsupported thread type","messenger_comet")}if(d==="ContentDoesNotFillContainer")return na(!0,void 0);if(d==="ToggleAddParticipants")return b("bs_curry")._1(ia,function(a){return!a});if(d!=="ClickVideo")if(d==="MarkTabBlur")return b("bs_curry")._1(ua,u);else if(d==="MarkTabFocused"){Ia(void 0);return b("bs_curry")._1(ta,u)}else if(d==="DeleteConversation"){b("ODS").bumpEntityKey(3185,"mwchat_settings","delete_conv");b("bs_curry")._1(Da,u);return b("bs_curry")._1(P,u)}else return na(void 0,void 0);if(typeof u==="string")return b("unrecoverableViolation")("Attempted to call unsupported thread type","messenger_comet");c=u.NAME;if(c==="User"||c==="Page"||c==="Group"){b("ZenonUserActionLogger").logClick({component:b("bs_curry")._1(b("RTWebLoggingComponentConvert.bs").converter.toJS,1),surface:b("bs_curry")._1(b("RTWebLoggingSurfaceConvert.bs").converter.toJS,3)});return b("bs_curry")._3(ga,!0,u.VAL,"comet_chattab_video_button")}else return b("unrecoverableViolation")("Attempted to call unsupported thread type","messenger_comet")}c=d.NAME;if(c==="ShowWebViewDialog")return b("bs_curry")._1(Ea,d.VAL);if(c==="ClickReplyTo"){b("ODS").bumpEntityKey(3185,"mwchat_send","reply");return b("bs_curry")._1(la,d.VAL)}if(c==="ShowPollDetails"){var a=d.VAL;return b("bs_curry")._2(Ba,a[0],a[1])}if(c==="AddParticipants"){b("bs_curry")._1(ia,function(a){return!a});return b("bs_curry")._1(ha,d.VAL)}if(c==="ScrollToElement"){a=d.VAL;var e=a[0];a=a[1];var f=z.current;if(!(f==null))return f.scrollToElement(e,a);else return}if(c==="UpdateBlock"){f=d.VAL;e=f[1];if(u.NAME==="Group")return b("unrecoverableViolation")("Can't block a group or local thread","messenger_comet");a=u.VAL;f[0]?b("MWChatBlockMessagesMutation").commitBlock(a,e,function(a){}):b("MWChatBlockMessagesMutation").commitUnblock(a,e,function(a){});return}if(c==="SetParticipantNickname"){f=d.VAL;a=f[1];var g=f[0];b("ODS").bumpEntityKey(3185,"mwchat_settings","change_nickname");if(typeof u==="string")return;e=u.NAME;if(!(e==="User"||e==="Group"))return;var h=b("bs_curry")._2(pa,g,a);f=function(a){};e=function(a){b("bs_curry")._2(pa,g,h)};return b("bs_curry")._5(za,u.VAL,g,a,f,e)}if(c!=="SendCometPostback")if(c==="LeaveGroup"){b("ODS").bumpEntityKey(3185,"mwchat_settings","leave_group");return xa(d.VAL)}else return b("bs_curry")._1(Aa,d);a=d.VAL;b("ODS").bumpEntityKey(3185,"mwchat_send","postback");return b("bs_curry")._2(Fa,a[0],a[1])};G=i.jsx(b("MWUIInThreadBanner.bs").make,{});if(typeof u==="string"||u.NAME!=="Page")K=[null,null];else{L=u.VAL;var S;if(E!==void 0){var T=b("bs_caml_option").valFromOption(E),U=T.icebreakers,V=T.icebreaker_ctas,W=0,X=0;U.length!==0||V.length!==0?X=2:S=null;X===2&&(V.length!==0||!m?W=1:S=i.jsx(i.Suspense,{children:i.jsx(ba,aa(U,[],function(a){b("ODS").bumpEntityKey(3185,"mwchat_send","text");b("bs_curry")._4(Ca,u,a,void 0,void 0);return R(void 0)},function(a){},L,F,void 0,void 0)),fallback:i.jsx(b("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})}));W===1&&(S=m?i.jsx(i.Suspense,{children:i.jsx(ba,aa(T.icebreakers,V,function(a){},function(a){b("ODS").bumpEntityKey(3185,"mwchat_send","postback");b("bs_curry")._2(Fa,a.title,{cta_id:a.id,prev_message_id:void 0,force_handle:!0,ref:void 0,postback_cta_ref_source:void 0});return R(void 0)},L,F,void 0,void 0)),fallback:i.jsx(b("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})}):null)}else S=null;K=[i.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResource")("MWChatBusinessManageMessagesDialogForJSResource.react").__setRef("MWChatTabContainer.bs"),dialogProps:{id:L,onClose:function(a){},dispatch:N},children:function(a,c){return i.jsx(b("CometLink.react"),{role:"button",style:{display:"block",fontWeight:"bold",paddingLeft:"4px"},children:g._("\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21"),ref:c,onClick:function(c){return b("bs_curry")._1(a,void 0)}})}}),S]}X=K[1];U=K[0];W=b("bs_curry")._1(b("MWUIContactCapabilities.bs").useCapabilities,b("bs_caml_format").caml_int64_of_string(Ha));T=b("bs_curry")._1(b("MWUIContactCapabilities.bs").isVerified,W)?"BLUE_VERIFIED":void 0;V=typeof t==="number"||t.TAG!==2?void 0:t._0.href;L=function(a,c){var d=b("bs_curry")._1(b("MWUIGetServerMessageID.bs").getServerMessageID,a.message_id);if(c)return b("XCometMessengerPhotoControllerRouteBuilder").buildURL({photo_ids:a.photo_ids,fbid:a.fbid,message_id:d});else return b("XCometMessengerMediaControllerRouteBuilder").buildURL({thread_id:Ha,attachment_id:a.fbid,message_id:d})};K=i.useState(function(){});var Y=K[1];W=K[0];K=i.useCallback(function(a){return b("bs_curry")._1(Y,function(a){})},[Y]);var Ja=i.useCallback(function(a){return b("bs_curry")._1(Y,function(b){return a})},[Y]),Z=b("qex")._("1586110");Z=Z==null?{}:{fontSize:String(Z)+"px"};var $;if(b("cr:1780084")==null)if(b("cr:1617847")==null)$=null;else{t={id:u,items:q,header:t,otherUserFbid:v,rtcButtonDisplayState:H,showSettings:s[0],isActiveNow:B,contextBannerData:I,welcomePageData:E,unreadCount:o,isBlocked:D,isMuted:p,isViewerInGroup:oa,isTabFocused:c,isScrolledToBottomRef:y,scrollerRef:z,sheet:G,icebreakerUI:X,managePageMessagesLink:U,shouldShowMenu:r,composerType:M,dispatch:N,closeTab:J,minimizeTab:n,clickHeader:O,endFirstChatTabOpenLoggerRef:a,hasContent:d,participants:A,nicknames:w[1],pageVerificationBadge:T,reportingToken:l,repliedToMessage:C,isEmptyThread:m,openPageURL:V,buildSharedMediaViewerURL:L,messageRequestInfoText:i.jsx(b("MWChatComposerMessageRequestInfoText.bs").make,{closeTab:P}),closeReplyPreview:ka,onSendMessage:R};H=b("MWChatComposerViewStateStore.bs").get(u);H!==void 0&&(t.initialComposerViewState=b("bs_caml_option").valFromOption(H));s=fa[1];s!==void 0&&(t.ongoingCallType=b("bs_caml_option").valFromOption(s));$=i.jsx(b("cr:1617847").make,t)}else $=i.jsx(b("cr:1780084").make,{items:q,id:u,otherUserFbid:v,welcomePageData:E,isTabFocused:c,isScrolledToBottomRef:y,initialComposerViewState:b("MWChatComposerViewStateStore.bs").get(u),scrollerRef:z,sheet:G,icebreakerUI:X,managePageMessagesLink:U,shouldShowMenu:r,composerType:M,dispatch:N,closeTab:J,endFirstChatTabOpenLoggerRef:a,hasContent:d,participants:A,repliedToMessage:C,buildSharedMediaViewerURL:L,closeReplyPreview:ka,onSendMessage:R});B={children:$,key:Ha,"aria-label":b("bs_belt_Option").mapWithDefault(F,g._("\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32"),function(a){return g._("\u0e41\u0e0a\u0e17\u0e01\u0e31\u0e1a {thread_title}",[g._param("thread_title",a)])}),className:(h||(h=b("stylex")))(b("CurrentUser").isWorkUser()?b("MWChatTabContainerShared.bs").styles.workChatTab:b("MWChatTabContainerShared.bs").styles.chatTab,f?b("MWChatTabContainerShared.bs").styles.sidebarChatOverrides:!1,e?b("MWChatTabContainerShared.bs").styles.chatTabNoBottomRadius:!1,b("qex")._("1586109")?b("MWChatTabContainerShared.bs").styles.chatTabThin:!1),role:j?"main":"region",style:Z};return i.jsx(b("MWTheme.bs").provider,{theme:W!==void 0?W:ma,setTheme:Ja,clearTheme:K,children:i.jsx(b("CometTransientDialogProvider.react"),{children:i.jsx("div",(B["data-testid"]="mwchat-tab",B))})})}c=a;f.make=c}),null);
__d("MWLSLoadIsDisabledComposerThreadLevel.bs",["React","SkytaleDB","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWThread_DEPRECATED.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:b("MWThread_DEPRECATED.bs").toThreadKey(a),tl:0}),function(a){return a.K})},[JSON.stringify(a),c]))}f.useHook=a}),null);
__d("MWLSSendCometPostback.bs",["bs_curry","React","MWLSPostbackCtaHandler.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("MWLSPostbackCtaHandler.bs").usePostbackCtaHandler(void 0);return g.useCallback(function(a){return function(d){return b("bs_curry")._2(c,JSON.stringify(d),a)}},[c])}f.useSendCometPostback=a}),null);
__d("MWLSMediaSendUtils.bs",["LS.bs","bs_curry","bs_caml_int64","bs_caml_format","bs_caml_option","LSMediaSendResumeMediaSendJobStoredProcedure","LSMediaSendMarkSubJobCompletedV2StoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=function(a){return a.toString()};function a(a,c,d,e,f,h,i){i=e!==void 0?b("bs_caml_option").valFromOption(e):void 0;e=f!==void 0?b("bs_caml_option").valFromOption(f):void 0;f=h!==void 0?b("bs_caml_option").valFromOption(h):void 0;return b("LSMediaSendMarkSubJobCompletedV2StoredProcedure")(c,b("bs_caml_format").caml_int64_of_string(g(d)),i!==void 0?b("bs_caml_option").valFromOption(i):void 0,e!==void 0?b("bs_caml_option").valFromOption(e):void 0,f!==void 0?b("bs_caml_option").valFromOption(f):void 0,b("bs_curry")._1(b("LS.bs").make,a))}function c(a,c){return b("LSMediaSendResumeMediaSendJobStoredProcedure")(c,b("bs_caml_int64").zero,b("bs_curry")._1(b("LS.bs").make,a))}f.castFbidFromNumber=g;f.markSubJobCompleted=a;f.resumeMediaSendJob=c}),null);
__d("MWLSImagePostbackCtaHandler.bs",["Promise","LS.bs","URI","FBID.bs","bs_curry","bs_int64","LSVec.bs","React","LSDict","ActorURI","MWLSActor.bs","SkytaleDB","bs_caml_array","bs_caml_int64","bs_caml_format","bs_caml_option","MWThreadKey.bs","promiseDone","LSMailboxType.bs","LSTransaction.bs","MercuryConfig","SkytaleDBHook.bs","MessagePowerUp.bs","MercuryLocalIDs","MWLSMediaSendUtils.bs","MessagingThreadType.bs","XComposerPhotoUploader","MessagingAttachmentType.bs","LSMessageReplySourceType.bs","LSMessageReplySourceTypeV2.bs","LSMessagingThreadAttributionType.bs","LSMediaSendInsertNewMediaSendStoredProcedure","LSMediaSendResumeMediaSendJobStoredProcedure","LSMailboxOptimisticSendMessageStoredProcedure","LSMediaSendMarkSubJobCompletedV2StoredProcedure","LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React");function i(a,c,d,e,f){var g=b("MercuryLocalIDs").generateOfflineThreadingID(void 0);return b("LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(c,d,b("MessagingThreadType.bs").oneToOne,void 0,void 0,!1,void 0,void 0,b("LSMessageReplySourceType.bs").none,b("LSMessageReplySourceTypeV2.bs").none,b("LSVec.bs").make([b("LSDict").fromObject({attachment_fbid:g,offline_attachment_id:g,attachment_type:b("MessagingAttachmentType.bs").image,attachment_index:b("bs_caml_int64").zero,filename:"postback image.jpg",filesize:void 0,has_media:!0,has_xma:!1,playable_url:void 0,playable_url_mime_type:void 0,playable_duration_ms:void 0,preview_url:e,preview_url_mime_type:"image/jpeg ",mini_preview:void 0,preview_width:void 0,preview_height:void 0,xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0})]),b("MessagePowerUp.bs").none,b("bs_curry")._1(b("LS.bs").make,a)).then(function(c){var e=c[0];return b("SkytaleDB").table(a,"messages_optimistic_context").add({a:b("bs_caml_format").caml_int64_of_string(e),b:d,c:e,d:void 0,e:void 0,f:void 0,g:void 0,h:f,i:void 0,j:void 0,k:void 0,l:!0}).then(function(a){return b("Promise").resolve([e,g])})})}function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return h.useMemo(function(){return function(a,f,h){var j=b("FBID.bs").ofStringExn(b("bs_int64").to_string(d)),k=function(a){var d=a[1],e=a[0],f=new(b("XComposerPhotoUploader"))({concurrentLimit:3,onUploadFailure:function(a,b){return!0},onUploadProgress:function(a,b){},onUploadStart:function(a){a=b("LSTransaction.bs").run(c,function(a){return b("LSMediaSendInsertNewMediaSendStoredProcedure")(d,e,b("bs_caml_int64").zero,b("MessagingAttachmentType.bs").image,!1,!1,!1,!1,!1,b("bs_curry")._1(b("LS.bs").make,a))},"readWrite");b("promiseDone")(a,void 0,void 0)},onUploadSuccess:function(a,f){a=b("bs_caml_array").get(f.response.payload.metadata,0);f=a.image_id;if(f===void 0)return;var g=b("bs_caml_option").valFromOption(f);a=b("LSTransaction.bs").run(c,function(a){return b("LSMediaSendMarkSubJobCompletedV2StoredProcedure")(d,b("bs_caml_format").caml_int64_of_string(b("MWLSMediaSendUtils.bs").castFbidFromNumber(g)),void 0,void 0,void 0,b("bs_curry")._1(b("LS.bs").make,a)).then(function(c){return b("LSMediaSendResumeMediaSendJobStoredProcedure")(e,b("bs_caml_int64").zero,b("bs_curry")._1(b("LS.bs").make,a))})},"readWrite");b("promiseDone")(a,void 0,void 0)},retryLimit:1,uploadEndpoint:new(b("ActorURI").create)(new(g||(g=b("URI")))(b("MercuryConfig").upload_url),j)});a=window.fetch(h).then(function(a){return a.blob()}).then(function(a){f.getAsyncUploadRequest([new File([a],"postback image.jpg",{type:"image/jpeg"})],void 0).send();return b("Promise").resolve(void 0)});b("promiseDone")(a,void 0,void 0)},l=b("LSTransaction.bs").run(c,function(a){return b("LSMailboxOptimisticSendMessageStoredProcedure")(d,e,b("MessagingThreadType.bs").oneToOne,b("LSMailboxType.bs").messenger,f,f,!1,void 0,void 0,void 0,void 0,b("LSMessagingThreadAttributionType.bs").unknown,void 0,void 0,void 0,b("LSMessageReplySourceType.bs").none,b("LSMessageReplySourceTypeV2.bs").none,void 0,!0,!0,void 0,void 0,b("MessagePowerUp.bs").none,void 0,b("bs_curry")._1(b("LS.bs").make,a))},"readWrite").then(function(f){return b("LSTransaction.bs").run(c,function(c){return i(c,d,e,h,a).then(function(a){b("bs_curry")._1(k,a)})},"readWrite")});b("promiseDone")(l,void 0,void 0)}},[c,d,e])}f.usePostbackCtaHandler=a}),null);
__d("MWLSMarketplaceXmaCallFunctionCtaHandler.bs",["LS.bs","bs_curry","React","MWLSActor.bs","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSMailboxOptimisticProcessMarketplaceCallFunctionCTAStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("MWLSActor.bs").useActor(void 0);return g.useCallback(function(a){return function(e,f,g){var h=b("LSTransaction.bs").run(c,function(c){return b("LSMailboxOptimisticProcessMarketplaceCallFunctionCTAStoredProcedure")(a,d,e,f,g,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");b("promiseDone")(h,void 0,void 0)}},[c,d,a])}f.useMarketplaceXmaCallFunctionCtaHandler=a}),null);
__d("MWLSActorHovercardContact.bs",["React","MWLSActor.bs","SkytaleDB","bs_caml_int64","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWThread_DEPRECATED.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0);a=b("MWThread_DEPRECATED.bs").useIdExn(void 0);var e=b("MWThread_DEPRECATED.bs").toThreadKey(a);return b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){var a;return(a=b("SkytaleDBQuery.bs")).map(a.filter(a.mergeJoin(a.getKeyRange(b("SkytaleDB").table(c,"participants").asc,{hd:e,tl:0}),b("SkytaleDB").table(c,"contacts").asc),function(a){return b("bs_caml_int64").neq(a[1].a,d)}),function(a){return a[1]})},[c,JSON.stringify(e),JSON.stringify(d)]))}f.useContact=a}),null);
__d("MWChatInThreadBanner.bs",["bs_curry","React","stylex","bs_belt_Option","bs_caml_option","CometRow.react","TetraText.react","TetraButton.react","CometRowItem.react","CometImageIcon.react","CometPressable.react","recoverableViolation","TetraTextPairing.react"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i={container:{position:"l9j0dhe7",backgroundColor:"nred35xi"},sheet:{borderBottom:"s1tcr66n"},sheetInner:{width:"k4urcfbm",paddingBottom:"osnr6wyh"},image:{marginEnd:"cxmmr5t8"},infoLabel:{backgroundColor:"tdjehn4e",borderTopStartRadius:"jk6sbkaj",borderTopEndRadius:"kdgqqoy6",borderBottomEndRadius:"ihh4hy1g",borderBottomStartRadius:"qttc61fc",overflowX:"ni8dbmo4",overflowY:"stjgntxs",paddingTop:"ggysqto6",paddingEnd:"ph5uu5jm",paddingBottom:"ojkyduve",paddingStart:"b3onmgus",textOverflow:"ltmttdrg",whiteSpace:"g0qnabr5"},grow:{flexGrow:"buofh1pr"},linkBanner:{width:"k4urcfbm"}};function j(a){var c=a.button;a=a.action;var d=c.e;if(typeof a==="number"){b("recoverableViolation")("In thread banner cta not implemented: "+c.d,"messenger_web_product");return null}switch(a.TAG|0){case 0:return h.jsx(b("CometRowItem.react"),{xstyle:i.grow,children:h.jsx(b("TetraButton.react"),{label:d,type:"secondary",linkProps:{target:"_blank",url:a._0}})});case 1:var e=a._0;c={label:d,type:"secondary",onPress:function(a){return b("bs_curry")._1(e,void 0)}};a._1!==void 0&&(c.ref=b("bs_caml_option").valFromOption(a._1));return h.jsx(b("CometRowItem.react"),{xstyle:i.grow,children:h.jsx(b("TetraButton.react"),c)});case 2:return h.jsx(b("CometRowItem.react"),{xstyle:i.grow,children:b("bs_curry")._1(a._0,function(a,c,e,f,g,i,j){return h.jsx(b("TetraButton.react"),{label:d,type:"secondary",onPress:function(a){return b("bs_curry")._1(c,void 0)},ref:a})})})}}c={make:j};function a(a){var c=a.banner;a=a.ctaParser;var d=c.banner.d;d=d!==void 0?h.jsx(b("CometRowItem.react"),{expanding:!1,children:h.jsx("div",{children:h.jsx(b("CometImageIcon.react"),{size:24,src:d,style:"circle"}),className:(g||(g=b("stylex")))(i.image)})}):null;var e=h.jsx(b("CometRowItem.react"),{expanding:!0,children:h.jsx(b("TetraTextPairing.react"),{body:b("bs_belt_Option").getWithDefault(c.banner.h,"")+b("bs_belt_Option").getWithDefault(c.banner.i,""),meta:b("bs_belt_Option").mapWithDefault(c.banner.g,null,function(a){return a}),level:4,bodyLineLimit:1,metaLineLimit:1,metaLocation:"above"})}),f=c.banner.t;f=f!==void 0?h.jsx(b("CometRowItem.react"),{children:h.jsx(b("TetraText.react"),{type:"meta1",children:h.jsx("span",{children:f,className:(g||(g=b("stylex")))(i.infoLabel)})})}):null;var k=c.leftButton,l=c.rightButton,m,n=0,o;k!==void 0?l!==void 0?m=h.jsxs(b("CometRow.react"),{paddingTop:8,children:[h.jsx(j,{button:k,action:b("bs_curry")._2(a,c,k)}),h.jsx(j,{button:l,action:b("bs_curry")._2(a,c,l)})]}):(o=k,n=1):l!==void 0?(o=l,n=1):m=null;n===1&&(m=h.jsx(b("CometRow.react"),{paddingTop:8,children:h.jsx(j,{button:o,action:b("bs_curry")._2(a,c,o)})}));var p=h.jsxs("div",{children:[h.jsxs(b("CometRow.react"),{children:[d,e,f]}),m],className:(g||(g=b("stylex")))(i.sheetInner)});k=b("bs_belt_Option").map(c.bannerAction,b("bs_curry")._1(a,c));var q;if(k!==void 0)if(typeof k==="number")b("recoverableViolation")("In thread banner cta not implemented: "+b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(c.bannerAction,function(a){return a.d}),""),"messenger_web_product"),q=p;else switch(k.TAG|0){case 0:q=h.jsx(b("CometPressable.react"),{expanding:!0,linkProps:{target:"_blank",url:k._0},xstyle:function(a){return[i.linkBanner]},children:p});break;case 1:var r=k._0;l={expanding:!0,onPress:function(a){return b("bs_curry")._1(r,void 0)},children:p};k._1!==void 0&&(l.ref=b("bs_caml_option").valFromOption(k._1));q=h.jsx(b("CometPressable.react"),l);break;case 2:q=b("bs_curry")._1(k._0,function(a,c,d,e,f,g,i){return h.jsx(b("CometPressable.react"),{expanding:!0,ref:a,onPress:function(a){return b("bs_curry")._1(c,void 0)},children:p})});break}else q=p;return h.jsx("div",{children:h.jsx("div",{children:q,className:g(i.sheet)}),className:g(i.container)})}d=a;f.styles=i;f.BannerButton=c;f.make=d}),null);
__d("MWLSExecuteInThreadBannerCta.bs",["LS.bs","bs_curry","React","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSInThreadBannerExecuteCTAStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return g.useCallback(function(a){var d=b("LSTransaction.bs").run(c,function(c){return b("LSInThreadBannerExecuteCTAStoredProcedure")(a,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");b("promiseDone")(d,void 0,void 0)},[c])}f.useHook=a}),null);
__d("MWLSInThreadBanner.bs",["bs_int64","SkytaleDB","bs_belt_Array","bs_caml_int64","bs_belt_Option","bs_caml_option","SkytaleDBExec.bs","SkytaleDBQuery.bs"],(function(a,b,c,d,e,f){"use strict";d={a:(c=b("bs_caml_int64")).zero,b:c.zero,c:c.zero,d:void 0,e:void 0,f:void 0,g:void 0,h:void 0,i:void 0,j:void 0,k:void 0,l:void 0,m:void 0,n:void 0,o:void 0,p:void 0,q:void 0,r:void 0,s:void 0,t:void 0};e={a:c.zero,b:c.zero,c:c.zero,d:"fallback",e:"",f:void 0,g:void 0,h:void 0};var g=[];g={banner:d,leftButton:void 0,rightButton:void 0,bannerAction:void 0,overflowMenuActions:g};function a(a,c){var d;return(d=b("SkytaleDBQuery.bs")).map(d.mergeJoin(d.getKeyRange(b("SkytaleDB").table(a,"in_thread_banner").asc,{hd:c,tl:0}),d.getKeyRange(b("SkytaleDB").table(a,"in_thread_banner_overflow_menu").asc,{hd:c,tl:0})),function(c){var d=c[1];c=c[0];var e=new Map(b("SkytaleDBExec.bs").toArray(b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"in_thread_banner_ctas").asc,{hd:c.b,tl:0}),function(a){return[b("bs_int64").to_string(a.b),a]}))),f=function(a){return b("bs_caml_option").nullable_to_opt(e.get(b("bs_int64").to_string(a)))};return{banner:c,leftButton:b("bs_belt_Option").flatMap(c.j,f),rightButton:b("bs_belt_Option").flatMap(c.m,f),bannerAction:b("bs_belt_Option").flatMap(c.r,f),overflowMenuActions:b("bs_belt_Array").keepMap([d.c,d.f,d.i,d.l,d.o],function(a){return b("bs_belt_Option").flatMap(a,f)})}})}c={a:c.zero,b:c.zero,c:void 0,d:void 0,e:void 0,f:void 0,g:void 0,h:void 0,i:void 0,j:void 0,k:void 0,l:void 0,m:void 0,n:void 0,o:void 0,p:void 0,q:void 0};f.emptyBanner=d;f.emptyCta=e;f.emptyMenu=c;f.empty=g;f.getInThread=a}),null);
__d("MWLSMarketplaceCtaParser.bs",["bs_curry","bs_int64","React","MWLSActor.bs","SkytaleDB","bs_caml_int64","JSResource","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","useCometLazyDialog","recoverableViolation","useCometEntryPointDialog","MWLSExecuteInThreadBannerCta.bs","CometLazyPopoverTrigger.react","SkytaleDBQuerySubscriptionHook.bs","CometMarketplaceInboxLabelChatDialog.entrypoint"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=["marketplace_mark_as_available","marketplace_mark_as_pending","marketplace_mark_as_sold","marketplace_mark_as_sold_scaled","marketplace_mark_as_sold_with_txn_survey","marketplace_mark_as_sold_with_txn_survey_scaled"];var h=new Set(c);d=new Set(c.concat(["marketplace_rate_buyer","marketplace_scaled_rate_buyer","marketplace_rate_seller","marketplace_scaled_rate_seller","marketplace_report_buyer","marketplace_report_seller","marketplace_see_details","marketplace_request_payment","marketplace_send_payment","marketplace_find_similar","marketplace_more_options","marketplace_p2m_request_payment","marketplace_xma_call_function","marketplace_label_chat"]));function i(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").filter(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"participants").asc,{hd:e,tl:0}),function(a){return b("bs_caml_int64").neq(a.b,d)}),function(a){return a.b})},[JSON.stringify(d),e,c]);a=b("SkytaleDBQuerySubscriptionHook.bs").useArray(a);var f=a.length;if(f!==1)return;f=a[0];return b("bs_int64").to_string(f)}function a(a){var c=b("MWLSExecuteInThreadBannerCta.bs").useHook(void 0),d=i(void 0);a=b("useCometLazyDialog")(b("JSResource")("CometFRX_DEPRECATED.react").__setRef("MWLSMarketplaceCtaParser.bs"));var e=a[1],f=a[0],j=b("bs_int64").to_string(b("MWThreadKey.bs").useIdMemoizedExn(void 0));a=b("useCometEntryPointDialog")(b("CometMarketplaceInboxLabelChatDialog.entrypoint"),{thread_id:j});var k=a[0];return g.useMemo(function(){var a=function a(i,l){var m=l.d;if(m!=="marketplace_see_details")if(m==="marketplace_more_options"&&i.overflowMenuActions.length>0)return{TAG:2,_0:function(c){return g.jsx(b("CometLazyPopoverTrigger.react"),{popoverResource:b("JSResource")("MWLSMarketplacePopoverMenu.react").__setRef("MWLSMarketplaceCtaParser.bs"),popoverProps:{menu:i.overflowMenuActions,ctaParser:function(b){return a(i,b)}},align:"end",children:c})}};else if(m==="marketplace_report_buyer"||m==="marketplace_report_seller")if(d!==void 0)return{TAG:1,_0:function(a){return f({entryPoint:"REPORT_BUTTON",id:d,location:m==="marketplace_report_buyer"?"marketplace_messenger_report_buyer":"marketplace_messenger_report_seller"},function(a){})},_1:e};else{b("recoverableViolation")("Haven't implemented report buyer/seller for threads with more than 1 person","messenger_web_product");return 0}else if(h.has(m))return{TAG:1,_0:function(a){return b("bs_curry")._1(c,l.b)},_1:void 0};else if(m==="marketplace_label_chat")return{TAG:1,_0:function(a){return k({threadID:j},function(a){return b("bs_curry")._1(c,l.b)})},_1:void 0};else return 0;var n=l.g;if(n!==void 0)return{TAG:0,_0:n};n=l.f;if(n!==void 0)return{TAG:0,_0:n};else{b("recoverableViolation")("Marketplace see details cta without url","messenger_web_product");return 0}};return a},[c,d,f,e,k])}f.marketplaceCta=d;f.useOtherParticipantId=i;f.useHook=a}),null);
__d("MWLSInThreadBannerCtaParser.bs",["bs_curry","MWLSMarketplaceCtaParser.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("MWLSMarketplaceCtaParser.bs").useHook(void 0);return function(a,d){var e=d.d;if(b("MWLSMarketplaceCtaParser.bs").marketplaceCta.has(e))return b("bs_curry")._2(c,a,d);else return 0}}f.useHook=a}),null);
__d("MWLSInThreadBannerComponent.bs",["React","MWThreadKey.bs","SkytaleDBHook.bs","MWLSInThreadBanner.bs","MWChatInThreadBanner.bs","MWLSInThreadBannerCtaParser.bs","MWLSEnsureInThreadBannerExists.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){b("MWLSEnsureInThreadBannerExists.bs").useHook(void 0);var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=g.useMemo(function(){return b("MWLSInThreadBanner.bs").getInThread(c,d)},[c,d]);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(a);var e=b("MWLSInThreadBannerCtaParser.bs").useHook(void 0);if(a!==void 0)return g.jsx(b("MWChatInThreadBanner.bs").make,{banner:a,ctaParser:e});else return null}c=a;f.make=c}),null);
__d("MWLSContactCapabilities.bs",["React","SkytaleDB","bs_belt_Option","LSBitOffset.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","LSContactCapabilityBitOffset.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,{hd:a,tl:0}),function(a){return b("bs_belt_Option").getWithDefault(a.G,b("LSBitOffset.bs").empty)})},[JSON.stringify(a),c]);d=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(d);if(d!==void 0)return d;else return b("LSBitOffset.bs").empty}function c(a){return b("LSBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").verified,a)}f.useCapabilities=a;f.isVerified=c}),null);
__d("MWLSThreadHasLeftGroup.bs",["React","bs_caml_obj","SkytaleDB","bs_belt_Option","bs_caml_option","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","bs_js_null_undefined","SkytaleDBQuerySubscriptionHook.bs","MessengerThreadCannotReplyReason","MessengerThreadCannotReplyReason.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return b("bs_belt_Option").getWithDefault(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0}),function(a){return b("bs_caml_obj").caml_equal(b("MessengerThreadCannotReplyReason.bs").fromName(b("bs_js_null_undefined").fromOption(a.v)),b("bs_caml_option").some(b("MessengerThreadCannotReplyReason").VIEWER_NOT_SUBSCRIBED))})},[c,d])),!1)}f.useHook=a}),null);
__d("MWLSThreadHeaderAttribution.bs",["SkytaleDB","bs_caml_format","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWLSThreadCapabilities.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);c=b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0}));if(c!==void 0){a=c.K;c=a!==void 0&&c.h!==a?a:void 0}else c=void 0;a=b("MWLSThreadCapabilities.bs").canDisplayActorTypeInThreadViewHeader(b("MWLSThreadCapabilities.bs").useCapabilities(void 0));if(a)return c}f.useHook=a}),null);
__d("MWLSThreadMuteExpireTimeMs.bs",["React","SkytaleDB","bs_caml_int64","bs_belt_Option","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return b("bs_belt_Option").getWithDefault(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0}),function(a){return b("bs_caml_int64").to_float(a.l)})},[c,d])),0)}f.useHook=a}),null);
__d("MWLSThreadName.bs",["React","SkytaleDB","bs_belt_Option","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0}),function(a){return b("bs_belt_Option").getWithDefault(a.d,"")})},[c,d]))}f.useHook=a}),null);
__d("MWLSUpdateParticipantNickname.bs",["LS.bs","bs_curry","React","bs_caml_format","bs_caml_option","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSMailboxOptimisticUpdateThreadParticipantNicknameStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return g.useMemo(function(){return function(a,e,f,g,h){a=b("LSTransaction.bs").run(c,function(a){return b("LSMailboxOptimisticUpdateThreadParticipantNicknameStoredProcedure")(d,b("bs_caml_format").caml_int64_of_string(e),f!==void 0?b("bs_caml_option").valFromOption(f):void 0,b("bs_curry")._1(b("LS.bs").make,a))},"readWrite");b("promiseDone")(a,void 0,void 0)}},[c,d])}f.useHook=a}),null);
__d("useMWUIPaymentDetailsDialog",["FBPayHubTransactionDetailDialog.entrypoint","useCometEntryPointDialog"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){return b("useCometEntryPointDialog")(b("FBPayHubTransactionDetailDialog.entrypoint"),{transactionID:a})}}),null);
__d("MWLSShowPaymentDetails.bs",["fbt","bs_curry","React","LSDatabaseType.bs","MWLSDatabaseLazySync.bs","useMWUIPaymentDetailsDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=h.useState(function(){return null});var c=a[1],d=a[0];a=h.useState(function(){return!1});var e=a[1],f=a[0];a=b("useMWUIPaymentDetailsDialog")(d);var i=a[0],j=b("MWLSDatabaseLazySync.bs").useSync(b("LSDatabaseType.bs").payments);h.useEffect(function(){!(d==null)&&f&&i({title:g._("\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e01\u0e32\u0e23\u0e0a\u0e33\u0e23\u0e30\u0e40\u0e07\u0e34\u0e19"),transactionID:d},function(a){return b("bs_curry")._1(e,function(a){return!1})})},[d,f]);return h.useMemo(function(){return function(a){b("bs_curry")._1(j,void 0);b("bs_curry")._1(e,function(a){return!0});return b("bs_curry")._1(c,function(b){return a})}},[e,c,j])}f.useHook=a}),null);
__d("MWLSOpenStaticLocationDialog.bs",["Promise","bs_int64","React","SkytaleDB","bs_caml_array","JSResource","bs_caml_option","MWThreadKey.bs","promiseDone","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","useCometLazyDialog"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("useCometLazyDialog")(b("JSResource")("MWChatStaticLocationDialog.react").__setRef("MWLSOpenStaticLocationDialog.bs"));var e=a[0];return g.useCallback(function(a){a=b("SkytaleDBQuery.bs").first(b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"attachments").asc,{hd:d,tl:{hd:a,tl:0}}),function(a){a=a.o;a=a!==void 0?a:b("bs_int64").zero;a=b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"attachment_ctas").asc,{hd:a,tl:0}));if(a!==void 0)return a.j})).then(function(a){if(a!==void 0){a=b("bs_caml_option").valFromOption(a);a=a!==void 0?a:""}else a="";var c=b("bs_caml_array").get(a.split(","),0);a=b("bs_caml_array").get(a.split(","),1);e({latitude:c,longitude:a},function(a){});return b("Promise").resolve(void 0)});b("promiseDone")(a,void 0,void 0)},[c,d])}f.useHook=a}),null);