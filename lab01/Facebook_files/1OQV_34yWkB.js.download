if (self.CavalryLogger) { CavalryLogger.start_js(["9gY73"]); }

__d("LSGraphqlInitialSyncQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"deviceId"},b={defaultValue:null,kind:"LocalArgument",name:"epochId"},c={defaultValue:null,kind:"LocalArgument",name:"numThreads"},d={defaultValue:null,kind:"LocalArgument",name:"schemaVersion"},e=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"epoch_id",variableName:"epochId"},{kind:"Variable",name:"num_threads",variableName:"numThreads"},{kind:"Variable",name:"schema_version",variableName:"schemaVersion"}],concreteType:"LightspeedSyncRequestResponse",kind:"LinkedField",name:"lightspeed_web_initial_sync",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_sync_timestamp_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"response",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,b,c,d],kind:"Fragment",metadata:null,name:"LSGraphqlInitialSyncQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,d,c,b],kind:"Operation",name:"LSGraphqlInitialSyncQuery",selections:e},params:{id:"3436098949788940",metadata:{},name:"LSGraphqlInitialSyncQuery",operationKind:"query",text:null}}}();a.params.id!=null&&b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("LSGraphqlInitialSync",["CometRelay","CometRelayEnvironment","LSGraphqlInitialSyncQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g;function a(a){var c=a.deviceId,d=a.epochId,e=a.numThreads;a=a.schemaVersion;return b("CometRelay").fetchQuery(b("CometRelayEnvironment"),g!==void 0?g:g=b("LSGraphqlInitialSyncQuery.graphql"),{deviceId:c,epochId:d,numThreads:e,schemaVersion:a}).toPromise()}}),null);
__d("LSGraphqlMailboxInitialSyncRequest.bs",["Promise","LSVersion.bs","bs_caml_format","ChannelClientID","LSGraphqlInitialSync","unrecoverableViolation","LSMailboxInitialSyncCursor.bs","LightspeedWebMailboxEpochId"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("LSGraphqlInitialSync")(a)}function c(a){return b("LSGraphqlInitialSync")({deviceId:b("ChannelClientID").getID(),epochId:b("LightspeedWebMailboxEpochId").epochId,numThreads:a,schemaVersion:b("LSVersion.bs").version}).then(function(a){if(a===void 0)return b("unrecoverableViolation")("Initial Sync via GraphQL returned an empty response","messenger_web_product");a=a.viewer.lightspeed_web_initial_sync;var c=a.last_sync_timestamp_ms;a=a.response;if(c!==void 0&&a!==void 0){b("LSMailboxInitialSyncCursor.bs").lastSyncTimestampMs.contents=b("bs_caml_format").caml_float_of_string(c);return b("Promise").resolve(a)}else return b("unrecoverableViolation")("Initial Sync via GraphQL returned but did not contain epochId, lastSyncTimestamp or a response","messenger_web_product")})}f.sendViaGraphQL=a;f.send=c}),null);